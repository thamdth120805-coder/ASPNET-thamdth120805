@page
@using OnlineLearningPlatform.Areas.Identity.Pages.Account
@model RegisterModel
@{
    ViewData["Title"] = "Đăng ký";
}

<div class="text-center mb-4">
    <h2 class="fw-bold text-dark mb-2">Tạo tài khoản mới</h2>
    <p class="text-muted">Bắt đầu hành trình học tập cùng LearnHub</p>
</div>

<form id="registerForm" asp-route-returnUrl="@Model.ReturnUrl" method="post">
    @Html.AntiForgeryToken()
    <div asp-validation-summary="ModelOnly" class="alert alert-danger" role="alert"></div>
    
    <div class="form-floating">
        <input asp-for="Input.FullName" class="form-control" autocomplete="name" aria-required="true" placeholder="Họ và tên" />
        <label asp-for="Input.FullName">Họ và tên</label>
        <span asp-validation-for="Input.FullName" class="text-danger"></span>
    </div>
    
    <div class="form-floating">
        <input asp-for="Input.Email" class="form-control" autocomplete="username" aria-required="true" placeholder="name@example.com" />
        <label asp-for="Input.Email">Email</label>
        <span asp-validation-for="Input.Email" class="text-danger"></span>
    </div>
    
    <div class="form-floating">
        <input asp-for="Input.Password" class="form-control" autocomplete="new-password" aria-required="true" placeholder="password" />
        <label asp-for="Input.Password">Mật khẩu</label>
        <span asp-validation-for="Input.Password" class="text-danger"></span>
    </div>
    
    <div class="form-floating">
        <input asp-for="Input.ConfirmPassword" class="form-control" autocomplete="new-password" aria-required="true" placeholder="password" />
        <label asp-for="Input.ConfirmPassword">Xác nhận mật khẩu</label>
        <span asp-validation-for="Input.ConfirmPassword" class="text-danger"></span>
    </div>
    
    <div class="form-check mb-3">
        <input class="form-check-input" type="checkbox" id="agreeTerms">
        <label class="form-check-label" for="agreeTerms">
            Tôi đồng ý với <a href="#" class="auth-link">Điều khoản sử dụng</a> và <a href="#" class="auth-link">Chính sách bảo mật</a>
        </label>
    </div>
    
    <div class="d-grid mb-3">
        <button id="registerSubmit" type="submit" class="btn btn-primary btn-lg">
            <i class="fas fa-user-plus me-2"></i>Tạo tài khoản
        </button>
    </div>
</form>

<div class="divider">
    <span>hoặc</span>
</div>

<div class="text-center">
    <a href="#" class="social-btn w-100">
        <i class="fab fa-google me-2"></i>
        Đăng ký với Google
    </a>
    <a href="#" class="social-btn w-100">
        <i class="fab fa-facebook-f me-2"></i>
        Đăng ký với Facebook
    </a>
</div>

<div class="text-center mt-4">
    <p class="mb-0">
        Đã có tài khoản? 
        <a asp-page="./Login" asp-route-returnUrl="@Model.ReturnUrl" class="auth-link">Đăng nhập ngay</a>
    </p>
</div>

@section Scripts {
    <partial name="_ValidationScriptsPartial" />
    <script>
        // Password strength indicator
        document.getElementById('Input_Password').addEventListener('input', function() {
            const password = this.value;
            const strengthBar = document.getElementById('password-strength');
            
            if (!strengthBar) return;
            
            let strength = 0;
            if (password.length >= 8) strength++;
            if (/[a-z]/.test(password)) strength++;
            if (/[A-Z]/.test(password)) strength++;
            if (/[0-9]/.test(password)) strength++;
            if (/[^A-Za-z0-9]/.test(password)) strength++;
            
            const colors = ['#dc3545', '#fd7e14', '#ffc107', '#20c997', '#28a745'];
            const texts = ['Rất yếu', 'Yếu', 'Trung bình', 'Mạnh', 'Rất mạnh'];
            
            strengthBar.style.width = (strength * 20) + '%';
            strengthBar.style.backgroundColor = colors[strength - 1] || '#e9ecef';
            strengthBar.textContent = texts[strength - 1] || '';
        });
    </script>
}